# AIDA Platform - Backend Environment Variables
# CRITICAL: Copy to .env.local and fill with actual values
# SECURITY: Never commit actual secrets to version control

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# =============================================================================
# AI PROVIDERS
# =============================================================================
# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Anthropic Configuration (optional)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key
ANTHROPIC_MODEL=claude-3-haiku-20240307

# =============================================================================
# EVOLUTION API CONFIGURATION (AIDA Platform Specific)
# =============================================================================
# AIDA Platform EvolutionAPI Configuration
EVOLUTION_API_KEY=429683C4C977415CAAFCCE10F7D57E11
EVOLUTION_API_BASE_URL=https://one-million-evolution-api.xwty7p.easypanel.host
EVOLUTION_WEBHOOK_SECRET=your-webhook-secret

# WhatsApp Instance Configuration
WHATSAPP_INSTANCE_PREFIX=aida_
WHATSAPP_WEBHOOK_BASE_URL=https://your-backend-domain.com/webhooks/whatsapp
WHATSAPP_CONNECTION_TIMEOUT_MS=60000
WHATSAPP_QR_CODE_TIMEOUT_MS=120000

# =============================================================================
# PLATFORM CONFIGURATION
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=debug
WEBHOOK_BASE_URL=http://localhost:8787
FRONTEND_URL=http://localhost:3000

# MVP Server Configuration
PORT=3000
NODE_ENV=development

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
JWT_SECRET=your-jwt-secret-key
ENCRYPTION_KEY=your-32-character-encryption-key
WEBHOOK_SIGNATURE_SECRET=your-webhook-signature-secret

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20
RATE_LIMIT_WINDOW_MS=60000

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
EMBEDDING_DIMENSION=1536
EMBEDDING_BATCH_SIZE=100
EMBEDDING_MAX_TOKENS=8191
VECTOR_SEARCH_THRESHOLD=0.7
VECTOR_SEARCH_LIMIT=10

# =============================================================================
# RAG CONFIGURATION
# =============================================================================
RAG_VECTOR_WEIGHT=0.4
RAG_TEXT_WEIGHT=0.3
RAG_GRAPH_WEIGHT=0.3
RAG_MAX_CONTEXT_LENGTH=4000
RAG_CONFIDENCE_THRESHOLD=0.7

# =============================================================================
# NEO4J GRAPH DATABASE CONFIGURATION
# =============================================================================
# Neo4j connection settings for knowledge graphs
NEO4J_URI=neo4j://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password
NEO4J_DATABASE=aida_knowledge

# Graph RAG Configuration
GRAPH_RAG_ENABLED=true
GRAPH_MAX_DEPTH=3
GRAPH_MAX_NODES=50
GRAPH_SIMILARITY_THRESHOLD=0.8
GRAPH_ENTITY_EXTRACTION_ENABLED=true
GRAPH_RELATIONSHIP_EXTRACTION_ENABLED=true

# Graph Building Configuration
GRAPH_CHUNK_SIZE=1000
GRAPH_CHUNK_OVERLAP=200
GRAPH_MAX_CONCURRENT_PROCESSING=3
GRAPH_AUTO_CREATE_RELATIONSHIPS=true

# =============================================================================
# AI RESPONSE CONFIGURATION
# =============================================================================
AI_MAX_RESPONSE_TIME_MS=30000
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=1000
AI_ENABLE_CONTENT_FILTER=true
AI_ENABLE_FACT_CHECKING=true

# =============================================================================
# BUSINESS CONFIGURATION
# =============================================================================
DEFAULT_BUSINESS_PLAN=free
MAX_ASSISTANTS_FREE=2
MAX_ASSISTANTS_PRO=10
MAX_ASSISTANTS_ENTERPRISE=unlimited
MAX_CONVERSATIONS_PER_MONTH_FREE=1000
MAX_CONVERSATIONS_PER_MONTH_PRO=10000
MAX_CONVERSATIONS_PER_MONTH_ENTERPRISE=unlimited

# =============================================================================
# MVP BILLING CONFIGURATION
# =============================================================================
# Simplified billing for MVP
MONTHLY_PRICE=250
MESSAGE_LIMIT=1000
DOCUMENT_LIMIT=10

# =============================================================================
# MVP WHATSAPP AUTH CONFIGURATION
# =============================================================================
# Admin instance for sending authentication codes
ADMIN_INSTANCE_NAME=aida-admin
ADMIN_INSTANCE_TOKEN=admin-token-123

# Authentication code configuration
AUTH_CODE_EXPIRY_MINUTES=5
MAX_FAILED_ATTEMPTS=3
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_ATTEMPTS=5

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
TEST_SUPABASE_URL=https://your-test-project.supabase.co
TEST_SUPABASE_ANON_KEY=your-test-supabase-anon-key
TEST_SUPABASE_SERVICE_ROLE_KEY=your-test-supabase-service-role-key
TEST_BUSINESS_ID=test-business-id
TEST_USER_EMAIL=test@example.com

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_HYBRID_RAG=true
FEATURE_CONVERSATION_ANALYTICS=true
FEATURE_ADVANCED_KNOWLEDGE_GRAPH=true
FEATURE_MULTI_LANGUAGE_SUPPORT=false
FEATURE_VOICE_MESSAGES=false
FEATURE_SENTIMENT_ANALYSIS=true
FEATURE_AUTO_ESCALATION=true
FEATURE_CUSTOM_INTEGRATIONS=false

# =============================================================================
# CLOUDFLARE WORKERS CONFIGURATION
# =============================================================================
# These are managed by wrangler.toml and Cloudflare dashboard
# CACHE_STORE (KV), SESSION_STORE (KV), RATE_LIMIT_STORE (KV)
# CONVERSATION_MANAGER (Durable Object), ASSISTANT_PROCESSOR (Durable Object)
# AI (Workers AI), ANALYTICS (Analytics Engine)
# EMBEDDING_QUEUE (Queue), MESSAGE_QUEUE (Queue), WEBHOOK_QUEUE (Queue)
# MEDIA_STORAGE (R2), BACKUP_STORAGE (R2)